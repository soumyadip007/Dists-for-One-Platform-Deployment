(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{153:function(t,e,i){"use strict";i.d(e,"a",(function(){return p})),i.d(e,"b",(function(){return f}));var n=i(0),a=i.n(n);function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){o(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e){if(null==t)return{};var i,n,a=function(t,e){if(null==t)return{};var i,n,a={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(a[i]=t[i]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(a[i]=t[i])}return a}var s=a.a.createContext({}),b=function(t){var e=a.a.useContext(s),i=e;return t&&(i="function"==typeof t?t(e):c(c({},e),t)),i},p=function(t){var e=b(t.components);return a.a.createElement(s.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return a.a.createElement(a.a.Fragment,{},e)}},u=a.a.forwardRef((function(t,e){var i=t.components,n=t.mdxType,o=t.originalType,r=t.parentName,s=l(t,["components","mdxType","originalType","parentName"]),p=b(i),u=n,f=p["".concat(r,".").concat(u)]||p[u]||d[u]||o;return i?a.a.createElement(f,c(c({ref:e},s),{},{components:i})):a.a.createElement(f,c({ref:e},s))}));function f(t,e){var i=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var o=i.length,r=new Array(o);r[0]=u;var c={};for(var l in e)hasOwnProperty.call(e,l)&&(c[l]=e[l]);c.originalType=t,c.mdxType="string"==typeof t?t:n,r[1]=c;for(var s=2;s<o;s++)r[s]=i[s];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,i)}u.displayName="MDXCreateElement"},206:function(t,e,i){"use strict";i.r(e),e.default=i.p+"assets/images/notifications-ms-architecture-9d6e991d4c74cc5c2ff61efc101cbfa4.png"},67:function(t,e,i){"use strict";i.r(e),i.d(e,"frontMatter",(function(){return r})),i.d(e,"metadata",(function(){return c})),i.d(e,"rightToc",(function(){return l})),i.d(e,"default",(function(){return b}));var n=i(2),a=i(6),o=(i(0),i(153)),r={id:"notifications-service",title:"Notifications Service",sidebar_label:"Notifications Service",slug:"/microservices/notifications-service"},c={unversionedId:"microservices/notifications/notifications-service",id:"microservices/notifications/notifications-service",isDocsHomePage:!1,title:"Notifications Service",description:"*",source:"@site/docs/microservices/notifications/notifications-service.md",slug:"/microservices/notifications-service",permalink:"/get-started/docs/microservices/notifications-service",editUrl:"https://github.com/1-platform/one-platform/edit/master/packages/documentation-spa/docs/microservices/notifications/notifications-service.md",version:"current",sidebar_label:"Notifications Service",sidebar:"someSidebar",previous:{title:"Lighthouse Service",permalink:"/get-started/docs/microservices/lighthouse-service"},next:{title:"Getting Started with Notification Templates",permalink:"/get-started/docs/microservices/notifications-service/get-started"}},l=[{value:"Developers",id:"developers",children:[{value:"Component Contributors",id:"component-contributors",children:[]}]},{value:"Getting Started",id:"getting-started",children:[]},{value:"Usage",id:"usage",children:[{value:"Introduction",id:"introduction",children:[]},{value:"Supported Features",id:"supported-features",children:[]},{value:"Quick Start Guide",id:"quick-start-guide",children:[]}]},{value:"API Reference",id:"api-reference",children:[{value:"GraphQL Queries",id:"graphql-queries",children:[]},{value:"GraphQL Mutations",id:"graphql-mutations",children:[]},{value:"GraphQL Subscriptions",id:"graphql-subscriptions",children:[]}]},{value:"FAQs",id:"faqs",children:[]},{value:"Architecture Diagram of the Notifications Microservice**",id:"architecture-diagram-of-the-notifications-microservice",children:[]}],s={rightToc:l};function b(t){var e=t.components,r=Object(a.a)(t,["components"]);return Object(o.b)("wrapper",Object(n.a)({},s,r,{components:e,mdxType:"MDXLayout"}),Object(o.b)("hr",null),Object(o.b)("h2",{id:"developers"},"Developers"),Object(o.b)("h3",{id:"component-contributors"},"Component Contributors"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Mayur Deshmukh - ",Object(o.b)("a",{parentName:"li",href:"mailto:mdeshmuk@redhat.com"},"mdeshmuk@redhat.com")),Object(o.b)("li",{parentName:"ol"},"Diwanshi Pandey - ",Object(o.b)("a",{parentName:"li",href:"mailto:dpandey@redhat.com"},"dpandey@redhat.com"))),Object(o.b)("h2",{id:"getting-started"},"Getting Started"),Object(o.b)("p",null,"Notifications Microservice provides the essential GraphQL APIs required for the Notifications Framework. It includes graphql queries for configuring notifications and templates, triggering notifications, listening for notifications, etc."),Object(o.b)("h2",{id:"usage"},"Usage"),Object(o.b)("h3",{id:"introduction"},"Introduction"),Object(o.b)("p",null,"Any developer can use the Notification Microservice to utilize/implement notifications in their App. They just have to create a notification config or a template, and they can start sending or listening to notifications using the GraphQL APIs and Subscriptions."),Object(o.b)("h3",{id:"supported-features"},"Supported Features"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Email Notifications"),Object(o.b)("li",{parentName:"ol"},"Push/Pop-up Notifications (Using GraphQL subscriptions)"),Object(o.b)("li",{parentName:"ol"},"Event-based notifications (coming soon)")),Object(o.b)("h4",{id:"apps-using-this-microservice"},"Apps using this microservice"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Feedback")),Object(o.b)("h3",{id:"quick-start-guide"},"Quick Start Guide"),Object(o.b)("p",null,"To get started with the Notifications Microservice, and to use it in your own apps, you can follow the following steps:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Create a notification config for your app from the One Platform Notifications Dashboard ","\u2013"," ",Object(o.b)("a",{parentName:"li",href:"https://one.redhat.com/notifications"},"https://one.redhat.com/notifications")),Object(o.b)("li",{parentName:"ol"},"Fill out the Notification Config form using the appropriate fields as are required for your use case."),Object(o.b)("li",{parentName:"ol"},"Once the notification config has been created, you will get a unique configID. You can use this configID to send and receive notifications for your app."),Object(o.b)("li",{parentName:"ol"},"To send a notification, you can use the existing GraphQL mutation newNotification to trigger a notification."),Object(o.b)("li",{parentName:"ol"},"For example, if you want to send out a notification, when the document is created in your app, you can simply call the GraphQL mutation and pass it the required data, such as the subject, body, etc. and the Notifications Microservice will send out the notification via the appropriate channels to the target/end-users.",Object(o.b)("ol",{parentName:"li"},Object(o.b)("li",{parentName:"ol"},"If the notification config was created for email notifications, then the notification will be sent out as an email."),Object(o.b)("li",{parentName:"ol"},"If the notification config was created for Push or Banner notifications, then the notification will be sent out as a GraphQL subscription."))),Object(o.b)("li",{parentName:"ol"},"One Platform\u2019s default navbar by default listens to all kinds of Push and Banner notifications for the respective logged in user. So any notification that is sent from your app for that user will be displayed to that user in the form of a pop-up in the UI, and also shown in the Notification Drawer."),Object(o.b)("li",{parentName:"ol"},"If you want to listen to the notifications in your app, for example to perform some custom actions, you can use any GraphQL subscriptions client library to connect to the Notifications Microservice subscriptions API, using the subscription newNotifications and pass it the target that you want to listen to, and it will be triggered whenever a notification for that target is sent out.")),Object(o.b)("h2",{id:"api-reference"},"API Reference"),Object(o.b)("p",null,"Endpoint: ",Object(o.b)("a",{parentName:"p",href:"https://api-gateway-cpops-one-prod.ext.us-west.aws.prod.paas.redhat.com/graphql"},"https://api-gateway-cpops-one-prod.ext.us-west.aws.prod.paas.redhat.com/graphql")),Object(o.b)("p",null,"Notifications Microservice provides a set of GraphQL Queries and Mutation APIs to allow developers to create, edit, delete their Notification Configs and Notifications."),Object(o.b)("h3",{id:"graphql-queries"},"GraphQL Queries"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"Query"),Object(o.b)("th",{parentName:"tr",align:null},"Description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"notificationTemplates")),Object(o.b)("td",{parentName:"tr",align:null},"Returns a list of all notificationTemplates")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"notificationTemplate(id: ID!)")),Object(o.b)("td",{parentName:"tr",align:null},"Returns a notificationTemplate with matching id")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"findNotificationTemplates(selectors: FindNotificationTemplates!)")),Object(o.b)("td",{parentName:"tr",align:null},"Finds a notification template matching the given selectors")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"listActiveNotifications")),Object(o.b)("td",{parentName:"tr",align:null},"Returns a list of Active Notifications.",Object(o.b)("br",null),"It accepts a parameter ",Object(o.b)("inlineCode",{parentName:"td"},"limit"),", to restrict the number of notifications in the response. (The default limit is 25)")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"listArchivedNotifications(targets: [String]!)")),Object(o.b)("td",{parentName:"tr",align:null},"Returns a list of the old/archived notifications.",Object(o.b)("br",null),"It accepts a mandatory parameter ",Object(o.b)("inlineCode",{parentName:"td"},"targets")," which can be used to get the notifications for the provided targets.",Object(o.b)("br",null),"It also accepts a parameter ",Object(o.b)("inlineCode",{parentName:"td"},"limit"),", to restrict the number of notifications in the response. (The default limit is 25)")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"getNotificationsBy(selector: FindNotificationInput!)")),Object(o.b)("td",{parentName:"tr",align:null},"Returns notifications matching the given selection criteria.",Object(o.b)("br",null),"It accepts a parameter \u201cselector\u201d of type NotificationPayloadInput.")))),Object(o.b)("br",null),Object(o.b)("h3",{id:"graphql-mutations"},"GraphQL Mutations"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"Mutation"),Object(o.b)("th",{parentName:"tr",align:null},"Description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"createNotificationTemplate(template: CreateNotificationTemplate!)")),Object(o.b)("td",{parentName:"tr",align:null},"Creates a new notification template")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"updateNotificationTemplate(id: ID!, template: UpdateNotificationTemplate!)")),Object(o.b)("td",{parentName:"tr",align:null},"Modifies a notification template")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"deleteNotificationTemplate(id: ID!)")),Object(o.b)("td",{parentName:"tr",align:null},"Delete a notification template matching id")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"triggerNotification(templateID: ID!, payload: NotificationPayloadInput!)")),Object(o.b)("td",{parentName:"tr",align:null},"Trigger notification using a template ID")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"newNotification(configID: ID!, payload: FindNotificationInput!)")),Object(o.b)("td",{parentName:"tr",align:null},"Creates a new notification using a config and add it to the queue")))),Object(o.b)("br",null),Object(o.b)("h3",{id:"graphql-subscriptions"},"GraphQL Subscriptions"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"Subscription"),Object(o.b)("th",{parentName:"tr",align:null},"Description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},Object(o.b)("inlineCode",{parentName:"td"},"newNotifications(target: [String!]!)")),Object(o.b)("td",{parentName:"tr",align:null},"A GraphQL subscription that establishes a socket connection with the Server.",Object(o.b)("br",null),"An event is sent to the client whenever a new notification is triggered. It accepts a ",Object(o.b)("inlineCode",{parentName:"td"},"targets")," parameter to filter and listen to the notifications for the specified targets.")))),Object(o.b)("br",null),Object(o.b)("h2",{id:"faqs"},"FAQs"),Object(o.b)("details",null,Object(o.b)("summary",null,"What kind of Notifications are supported by the Notifications Microservice?"),Object(o.b)("p",null,"Email, Push and Banner. Webhooks will be added soon.")),Object(o.b)("details",null,Object(o.b)("summary",null,"What is the difference between Notification Config and a Notification Template?"),Object(o.b)("p",null,"Notification Templates are the text templates that use some templating engine (like Twig) to define a notification data.")),Object(o.b)("details",null,Object(o.b)("summary",null,"Do I have to create a Notification Config to use the Notifications Microservice?"),Object(o.b)("p",null,"No. The Notification Config is an alternative to the templates mostly to be used with Push and Banner notifications. It helps define the defaults and allows the Notifications Rule Engine to determine where and how the Notification should be sent.")),Object(o.b)("details",null,Object(o.b)("summary",null,"How does the Notifications microservice work?"),Object(o.b)("p",null,"The Notifications Microservice consists of 3 main components."),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"APIs"),Object(o.b)("li",{parentName:"ol"},"Rule Engine"),Object(o.b)("li",{parentName:"ol"},"Queue / Scheduler"))),Object(o.b)("br",null),Object(o.b)("h2",{id:"architecture-diagram-of-the-notifications-microservice"},"Architecture Diagram of the Notifications Microservice**"),Object(o.b)("p",null,"  ",Object(o.b)("img",{alt:"Notifications Microservice Architecture",src:i(206).default})))}b.isMDXComponent=!0}}]);